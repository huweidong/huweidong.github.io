<!doctype html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta property="og:type" content="website">
<meta property="og:title" content="echo.hu">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="echo.hu">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="echo.hu">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'åšä¸»'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/"/>





  <title> echo.hu </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  














  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">echo.hu</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
    
      <p class="site-subtitle"></p>
    
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            é¦–é¡µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="https://github.com/huweidong" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            å…³äº
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            å½’æ¡£
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/07/AFNetworkingæµç¨‹é‡æ–°æ•´ç†/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="echo.hu">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/uploads/headImage.png">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="echo.hu">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="echo.hu" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2018/04/07/AFNetworkingæµç¨‹é‡æ–°æ•´ç†/" itemprop="url">
                  AFNetworkingæµç¨‹é‡æ–°æ•´ç†
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-04-07T15:22:22+08:00">
                2018-04-07
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/04/07/AFNetworkingæµç¨‹é‡æ–°æ•´ç†/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2018/04/07/AFNetworkingæµç¨‹é‡æ–°æ•´ç†/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2018/04/07/AFNetworkingæµç¨‹é‡æ–°æ•´ç†/" class="leancloud_visitors" data-flag-title="AFNetworkingæµç¨‹é‡æ–°æ•´ç†">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•° </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="AFNetworkingç”Ÿæˆ-NSURLSessionDataTask-å¯¹è±¡"><a href="#AFNetworkingç”Ÿæˆ-NSURLSessionDataTask-å¯¹è±¡" class="headerlink" title="AFNetworkingç”Ÿæˆ NSURLSessionDataTask å¯¹è±¡"></a>AFNetworkingç”Ÿæˆ NSURLSessionDataTask å¯¹è±¡</h3><h4 id="ç”Ÿæˆè¯·æ±‚request"><a href="#ç”Ÿæˆè¯·æ±‚request" class="headerlink" title="ç”Ÿæˆè¯·æ±‚request"></a>ç”Ÿæˆè¯·æ±‚request</h4><p>1ã€æ ¹æ®URLç”Ÿæˆè¯·æ±‚å¯¹è±¡ã€‚</p>
<p>2ã€å¦‚æœ‰è®¾ç½®è¯·æ±‚å±æ€§åˆ™æ ¹æ®self.mutableObservedChangedKeyPathsé‡Œé¢çš„å€¼ä¼šåœ¨åˆå§‹åŒ–requestSerializerä¸­ç›¸å…³çš„å±æ€§çš„æ—¶å€™é€šè¿‡kvoèµ‹å€¼æˆ–ç§»é™¤ã€‚</p>
<p>3ã€æ ¹æ®è®¾ç½®çš„ä¸åŒçš„è§£æç®¡ç†å™¨è°ƒç”¨ä¸åŒçš„æ–¹æ³•(è§£æå™¨æœ‰jsonè§£æå™¨ã€httpè§£æå™¨ç­‰è§£æå™¨ï¼Œè¿™é‡Œä»¥httpè§£æå™¨ä¸ºä¾‹)ï¼Œåœ¨è§£æå™¨ä¸­é¦–å…ˆè®¾ç½®è¯·æ±‚å¤´å‚æ•°ï¼Œç„¶åå†å¦‚æœæœ‰å®šä¹‰ç›¸å…³å‚æ•°å®šä¹‰ç‰¹æ®Šå¤„ç†ä»£ç å—åˆ™è¿›è¡Œç›¸å…³çš„å¤„ç†ï¼Œå†ç„¶åå¦‚æœä¸ºgetæˆ–è€…æ˜¯headè¯·æ±‚åˆ™æ‹¼æ¥ç›¸å…³çš„å­—ç¬¦ä¸²å¹¶èµ‹å€¼ç»™mutableRequest.URLä¸­ï¼Œå¦‚æœæ˜¯postè¯·æ±‚åˆ™æŠŠå‚æ•°ç»è¿‡ç‰¹æ®Šå¤„ç†å˜æˆå­—ç¬¦ä¸²èµ‹å€¼åˆ°è¯·æ±‚çš„å¤´é‡Œé¢ã€‚</p>
<p>4ã€ç”Ÿæˆå¤±è´¥åˆ™ç›´æ¥å›è°ƒå¤±è´¥ä»£ç å—ã€‚</p>
<h4 id="æ ¹æ®è¯·æ±‚å’Œç›¸å…³å‚æ•°ç”Ÿæˆ-NSURLSessionDataTask-å¯¹è±¡"><a href="#æ ¹æ®è¯·æ±‚å’Œç›¸å…³å‚æ•°ç”Ÿæˆ-NSURLSessionDataTask-å¯¹è±¡" class="headerlink" title="æ ¹æ®è¯·æ±‚å’Œç›¸å…³å‚æ•°ç”Ÿæˆ NSURLSessionDataTask å¯¹è±¡"></a>æ ¹æ®è¯·æ±‚å’Œç›¸å…³å‚æ•°ç”Ÿæˆ NSURLSessionDataTask å¯¹è±¡</h4><p>1ã€åœ¨ä¿è¯çº¿ç¨‹å®‰å…¨çš„å‰æä¸‹è°ƒç”¨ç³»ç»Ÿæ ¹æ®è¯·æ±‚ç”ŸæˆNSURLSessionå¯¹è±¡çš„æ–¹æ³•ã€‚</p>
<p>2ã€ç”¨å­—å…¸ä»¥AFURLSessionManagerTaskDelegateå¯¹è±¡çš„æ–¹å¼ä¿å­˜ç›¸å…³çš„ä»£ç å—ã€‚å­—å…¸çš„keyä¸ºtaskIdentifierï¼Œå¹¶ä¸”æ·»åŠ å¼€å§‹è¯·æ±‚å’Œå®Œæˆè¯·æ±‚çš„ç›¸å…³é€šçŸ¥ã€‚</p>
<h3 id="AFNetworkingæ•°æ®è§£æ"><a href="#AFNetworkingæ•°æ®è§£æ" class="headerlink" title="AFNetworkingæ•°æ®è§£æ"></a>AFNetworkingæ•°æ®è§£æ</h3><p>1ã€å­˜å‚¨è§£æå™¨çš„ç±»å‹(è§£æå™¨æœ‰jsonï¼Œhttpï¼Œxmlç­‰ç±»å‹)ã€‚</p>
<p>2ã€å»ºç«‹å±€éƒ¨æ•°æ®å­˜å‚¨ï¼Œé‡Šæ”¾å…¨å±€æ•°æ®å­˜å‚¨dataã€‚</p>
<p>3ã€å¦‚è¿”å›çš„ç½‘ç»œè¿æ¥å‘ç”Ÿé”™è¯¯åˆ™ç›´æ¥åœ¨ä¸»çº¿ç¨‹å›è°ƒå®Œæˆä»£ç å—å¹¶å‘é€ç›¸å…³é€šçŸ¥ã€‚</p>
<p>4ã€ååˆ™è¿›è¡Œæ•°æ®è§£æï¼Œå…ˆåˆ¤æ–­æ•°æ®çš„æœ‰æ•ˆæ€§(ä¸»è¦åˆ¤æ–­æ˜¯å¦å­˜åœ¨å¯æ¥å—çš„æ•°æ®ç±»å‹ã€MIMEç±»å‹æ˜¯å¦å­˜åœ¨ã€dataçš„é•¿åº¦æ˜¯å¦å­˜åœ¨å¯æ¥å—çš„çŠ¶æ€ç ï¼Œè¯·æ±‚çš„URLæ˜¯å¦å­˜åœ¨)ï¼Œç„¶åè¿›è¡Œjsonè§£ç æŠŠdataå˜æˆç›¸å…³çš„å¯è§£æå­—ç¬¦ä¸²å¯¹è±¡(å¦‚è®¾ç½®çš„æ˜¯jsonæ•°æ®æ ¼å¼)ã€‚</p>
<p>5ã€å¦‚æ˜¯ä¸‹è½½æ–‡ä»¶åˆ™æŠŠresponseObjectå¯¹è±¡è®¾ç½®æˆä¸‹è½½æ–‡ä»¶çš„URL</p>
<p>6ã€ç„¶åå†ä¸»çº¿ç¨‹å›è°ƒå®Œæˆä»£ç å—å’Œå‘é€å®Œæˆè¯·æ±‚çš„é€šçŸ¥ã€‚</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/10/12/ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å¼/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="echo.hu">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/uploads/headImage.png">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="echo.hu">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="echo.hu" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/10/12/ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å¼/" itemprop="url">
                  ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å¼
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-10-12T10:22:22+08:00">
                2017-10-12
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/10/12/ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å¼/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/10/12/ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å¼/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2017/10/12/ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å¼/" class="leancloud_visitors" data-flag-title="ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å¼">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•° </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å¼"><a href="#ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å¼" class="headerlink" title="ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å¼"></a>ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å¼</h1><p>è§£å†³çš„é—®é¢˜ï¼šé¿å…ä¸¤ä¸ªçº¿ç¨‹å…¶ä¸­ä¸€ä¸ªçº¿ç¨‹å¤„ç†è¿‡å¿«ç­‰å¾…å¦å¤–ä¸€ä¸ªçº¿ç¨‹é€ æˆèµ„æºçš„æµªè´¹ã€‚</p>
<p>ä¸¾ä¸ªğŸŒ°</p>
<p>æ¯”å¦‚å¯¹å›¾ç‰‡çš„å¤„ç†æ”¹å˜å…¶å†·æš–è‰²è°ƒæ—¶ï¼Œå¾€å¾€ç”¨æˆ·å¯èƒ½éœ€è¦è¿›è¡Œå¤šæ¬¡é¢‘ç¹çš„å‚æ•°è°ƒæ•´ï¼Œå‡å¦‚è®¾ç½®ä¸€æ¬¡å‚æ•°æ¸²æŸ“å›¾ç‰‡çš„æ—¶é—´ä¸º1ç§’(å½“ç„¶è‚¯å®šä¸ä¼šé‚£ä¹ˆé•¿æ—¶é—´ï¼Œè¿™æ˜¯ä¸ªğŸŒ°ï¼Œè¿™æ˜¯ä¸ªğŸŒ°)ï¼Œå½“ç”¨æˆ·æ‹–åŠ¨è¿›åº¦æ¡ä»0æ‹–åˆ°10æ—¶ï¼Œå¤„ç†çš„æ¬¡æ•°è‚¯å®šè¶…è¿‡åæ¬¡ï¼Œå¦‚æœæ­¤æ—¶éƒ½åœ¨ä¸»çº¿ç¨‹å¤„ç†ï¼Œåˆ™å¤„ç†æ—¶é—´è‚¯å®šä¼šè¶…è¿‡åç§’ï¼Œè¿™ä¸ªå¾ˆæ˜æ˜¾æ˜¯ä¸ç°å®çš„ï¼Œæ‰€ä»¥è¿™ä¸ªæ—¶å€™å°±éœ€è¦ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å¼äº†ã€‚</p>
<p><strong>ä¸»çº¿ç¨‹</strong>ä½œä¸º-&gt;<strong>ç”Ÿäº§è€…</strong>ï¼šä¸»è¦è´Ÿè´£ç”Ÿäº§ä»»åŠ¡ï¼Œå³æ”¶é›†ä»»åŠ¡ï¼Œæ¯”å¦‚ä¸Šä¾‹ä¸­çš„æ¸²æŸ“ä¸€æ¬¡å›¾ç‰‡çš„ä»»åŠ¡ã€‚æ¯æ¬¡æ¥æ”¶åˆ°ä»»åŠ¡æ—¶éƒ½æŠŠä¸Šä¸€æ¬¡çš„ä»»åŠ¡æ¸…ç©ºï¼Œç›´æ¥å¤„ç†æœ€æ–°æ•°æ®ï¼ŒæŠ›å¼ƒæ—§æ•°æ®ï¼Œè®©ç”¨æˆ·å¯ä»¥ç›´æ¥çœ‹åˆ°æœ€æ–°çš„å¤„ç†ç»“æœã€‚</p>
<p><strong>å¼‚æ­¥å…¨å±€çº¿ç¨‹</strong>ä½œä¸º-&gt;<strong>æ¶ˆè´¹è€…</strong>ï¼šä¸»è¦è´Ÿè´£å¤„ç†ä»»åŠ¡ã€‚æ¶ˆè´¹è€…é‡Œé¢ä¼šæœ‰ä¸€ä¸ªæ— é™å¾ªç¯ç”¨äºå¤„ç†ç”Ÿäº§è€…ç”Ÿäº§çš„ä»»åŠ¡ã€‚</p>
<h3 id="ä¸»è¦è¿‡ç¨‹"><a href="#ä¸»è¦è¿‡ç¨‹" class="headerlink" title="ä¸»è¦è¿‡ç¨‹"></a>ä¸»è¦è¿‡ç¨‹</h3><p>ä¸»è¦çš„è¿‡ç¨‹åŒ…æ‹¬å¦‚ä¸‹</p>
<p>1.åˆå§‹åŒ–æ—¶å…¨å±€å¼‚æ­¥çº¿ç¨‹å¤„ç†ä»£ç å—è¿›å…¥ç­‰å¾…</p>
<p>2.ä¸»çº¿ç¨‹runï¼Œpushä»£ç å—è¿›å…¥æ•°ç»„</p>
<p>3.æ¿€æ´»å…¨å±€å¼‚æ­¥çº¿ç¨‹å¯¹ä»£ç å—è¿›è¡Œå¤„ç†</p>
<p>4.æ‰§è¡Œå®Œpopå‡ºä»£ç å—ï¼Œç»§ç»­è¿›å…¥ç­‰å¾…</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/03/30/å…³äºä½¿ç”¨AFNetworkingå†…å­˜æ³„éœ²çš„é—®é¢˜/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="echo.hu">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/uploads/headImage.png">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="echo.hu">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="echo.hu" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/03/30/å…³äºä½¿ç”¨AFNetworkingå†…å­˜æ³„éœ²çš„é—®é¢˜/" itemprop="url">
                  AFNetworkingå†…å­˜æ³„éœ²çš„é—®é¢˜
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-03-30T11:06:22+08:00">
                2017-03-30
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/03/30/å…³äºä½¿ç”¨AFNetworkingå†…å­˜æ³„éœ²çš„é—®é¢˜/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/03/30/å…³äºä½¿ç”¨AFNetworkingå†…å­˜æ³„éœ²çš„é—®é¢˜/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2017/03/30/å…³äºä½¿ç”¨AFNetworkingå†…å­˜æ³„éœ²çš„é—®é¢˜/" class="leancloud_visitors" data-flag-title="AFNetworkingå†…å­˜æ³„éœ²çš„é—®é¢˜">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•° </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="å…³äºä½¿ç”¨AFNetworkingå†…å­˜æ³„éœ²çš„é—®é¢˜"><a href="#å…³äºä½¿ç”¨AFNetworkingå†…å­˜æ³„éœ²çš„é—®é¢˜" class="headerlink" title="å…³äºä½¿ç”¨AFNetworkingå†…å­˜æ³„éœ²çš„é—®é¢˜"></a>å…³äºä½¿ç”¨AFNetworkingå†…å­˜æ³„éœ²çš„é—®é¢˜</h1><p>è¿™å‡ å¤©åšå®Œé¡¹ç›®äºæ˜¯ç”¨instrumentsé‡Œé¢çš„Leaksæ£€æŸ¥äº†ä¸‹å†…å­˜æƒ…å†µ,ç»“æœå‘ç°äº†ä¸€äº›AFé‡Œé¢çš„å‘ï¼ŒAF Issuesä¸Šé¢ä¹Ÿæœ‰<a href="https://github.com/AFNetworking/AFNetworking/issues/3293" target="_blank" rel="external">å“¥ä»¬</a>æå‡ºé—®é¢˜æ¥ï¼Œä¸è¿‡ä¹Ÿå¹¶æ²¡æœ‰è§£é‡Šæ¸…æ¥šï¼Œæ‰€ä»¥ç‰¹æ„è‡ªå·±é‡æ–°çœ‹äº†éæºç æ•´ç†äº†ä¸‹.</p>
<p>ä¸‹é¢æ˜¯æˆ‘æŠ¥å†…å­˜æ³„éœ²çš„éƒ¨åˆ†ä»£ç </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">- (instancetype)init</div><div class="line">&#123;</div><div class="line">    self = [super init];</div><div class="line">    if (self) &#123;</div><div class="line">        self.manager=[AFHTTPSessionManager manager];</div><div class="line">        self.manager.requestSerializer=[AFJSONRequestSerializer serializer];</div><div class="line">        self.manager.requestSerializer.timeoutInterval=30;</div><div class="line">        self.manager.responseSerializer=[AFJSONResponseSerializer serializer];</div><div class="line">        self.manager.responseSerializer.acceptableContentTypes = [NSSet setWithObject:@&quot;application/json&quot;];</div><div class="line">    &#125;</div><div class="line">    return self;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™é‡Œçš„manageræ–¹æ³•å¹¶ä¸æ˜¯å•ä¾‹æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ªmanagerå¯¹è±¡ä¼šå¯¹åº”ä¸€ä¸ªæˆ–å¤šä¸ªNSURLSessionå¯¹è±¡ï¼Œè¿™æ ·åˆ›å»ºä¼šé€ æˆå†…å­˜å¢é•¿ï¼Œä½†æ˜¯è¿™æ ·åº”è¯¥å¹¶ä¸ä¼šé€ æˆå†…å­˜æ³„éœ²æ‰å¯¹ï¼Œå†µä¸”æˆ‘åœ¨deallocæ–¹æ³•é‡Œé¢å·²ç»æŠŠmanagerç½®ç©ºï¼Œäºæ˜¯æˆ‘æŸ¥æ‰¾è‹¹æœå®˜æ–¹æ–‡æ¡£ï¼Œæ‰¾åˆ°å¦‚ä¸‹ä¿¡æ¯</p>
<p>Important</p>
<p>The session object keeps a strong reference to the delegate until your app exits or explicitly invalidates the session. If you do not invalidate the session, your app leaks memory until it exits.</p>
<p>å¤§æ„å¦‚ä¸‹ï¼š</p>
<p>ä¼šè¯å¯¹è±¡ä¿æŒå¯¹ä»£ç†çš„å¼ºçƒˆå¼•ç”¨ï¼Œç›´åˆ°æ‚¨çš„åº”ç”¨ç¨‹åºé€€å‡ºæˆ–æ˜¾å¼ä½¿ä¼šè¯æ— æ•ˆã€‚ å¦‚æœæ‚¨ä¸ä½¿ä¼šè¯æ— æ•ˆï¼Œæ‚¨çš„åº”ç”¨ç¨‹åºä¼šåœ¨å†…å­˜æº¢å‡ºä¹‹å‰æ³„æ¼å†…å­˜ã€‚</p>
<p>ç„¶åæˆ‘åœ¨AFçš„æºç é‡Œé¢çš„initWithSessionConfigurationæ–¹æ³•æ‰¾åˆ°å¦‚ä¸‹ä»£ç </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">@property (readwrite, nonatomic, strong) NSURLSession *session;</div><div class="line"></div><div class="line">self.session = [NSURLSession sessionWithConfiguration:self.sessionConfiguration delegate:self delegateQueue:self.operationQueue];</div></pre></td></tr></table></figure>
<p>é‚£ä¹ˆç­”æ¡ˆå°±å‡ºæ¥äº†sessionè¢«AFNetworkReachabilityManagerå¯¹è±¡å¼ºå¼•ç”¨äº†ï¼Œsessionçš„å§”æ‰˜åˆå¼ºæŒæœ‰äº†AFNetworkReachabilityManagerå¯¹è±¡ï¼Œæ‰€ä»¥å¯¼è‡´AFNetworkReachabilityManagerå¯¹è±¡ç½®ç©ºåsessionä¾ç„¶å­˜åœ¨ï¼Œä»è€Œå¯¼è‡´å†…å­˜æ³„æ¼äº†</p>
<p>æ‰€ä»¥ï¼Œæ­£ç¡®çš„ç”¨æ³•åº”è¯¥åœ¨AFä¸Šé¢å†å°è£…å¤šä¸€å±‚æŠŠmanagerå†™æˆå•ä¾‹ï¼Œé™ä½å†…å­˜å³°å€¼ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">+ (AFHTTPSessionManager *)sharedManager &#123;</div><div class="line">    static dispatch_once_t onceToken;</div><div class="line">    dispatch_once(&amp;onceToken, ^&#123;</div><div class="line">        manager=[AFHTTPSessionManager manager];</div><div class="line">        manager.requestSerializer=[AFJSONRequestSerializer serializer];</div><div class="line">        manager.requestSerializer.timeoutInterval=30;</div><div class="line">        manager.responseSerializer=[AFJSONResponseSerializer serializer];</div><div class="line">        manager.responseSerializer.acceptableContentTypes = [NSSet setWithObject:@&quot;application/json&quot;];</div><div class="line">    &#125;);</div><div class="line">    return manager;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä½¿ç”¨åˆ™ç›´æ¥[å°è£…ç±»å sharedManager] POSTå¦‚æ­¤ä½¿ç”¨å³å¯.</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/02/19/AFNetworkingå›¾ç‰‡åŠ è½½ç†è§£/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="echo.hu">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/uploads/headImage.png">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="echo.hu">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="echo.hu" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/02/19/AFNetworkingå›¾ç‰‡åŠ è½½ç†è§£/" itemprop="url">
                  AFNetworkingå›¾ç‰‡åŠ è½½ç†è§£
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-02-19T14:06:22+08:00">
                2017-02-19
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/02/19/AFNetworkingå›¾ç‰‡åŠ è½½ç†è§£/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/02/19/AFNetworkingå›¾ç‰‡åŠ è½½ç†è§£/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2017/02/19/AFNetworkingå›¾ç‰‡åŠ è½½ç†è§£/" class="leancloud_visitors" data-flag-title="AFNetworkingå›¾ç‰‡åŠ è½½ç†è§£">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•° </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="å…ˆæ˜¯UIImageView-AFNetworkingåˆ†ç±»"><a href="#å…ˆæ˜¯UIImageView-AFNetworkingåˆ†ç±»" class="headerlink" title="å…ˆæ˜¯UIImageView+AFNetworkingåˆ†ç±»"></a><a href="https://github.com/MyExam-hu/SummaryPro/blob/master/Pods/AFNetworking/UIKit%2BAFNetworking/UIImageView%2BAFNetworking.m" target="_blank" rel="external">å…ˆæ˜¯UIImageView+AFNetworkingåˆ†ç±»</a></h3><p><strong>ä¸»è¦æ–¹æ³•setImageWithURLRequest</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">- (void)setImageWithURLRequest:(NSURLRequest *)urlRequest</div><div class="line">              placeholderImage:(UIImage *)placeholderImage</div><div class="line">                       success:(void (^)(NSURLRequest *request, NSHTTPURLResponse * _Nullable response, UIImage *image))success</div><div class="line">                       failure:(void (^)(NSURLRequest *request, NSHTTPURLResponse * _Nullable response, NSError *error))failure</div></pre></td></tr></table></figure>
<p>è¯¥æ–¹æ³•ä¸»è¦åšäº†å¦‚ä¸‹å‡ ä»¶äº‹:</p>
<ul>
<li><p>å¦‚æœè¯·æ±‚çš„urlä¸ºç©ºåˆ™ç›´æ¥è®¾ç½®å ä½ç¬¦å›¾ç‰‡ä¸ºæœ€ç»ˆå›¾ç‰‡ã€‚</p>
</li>
<li><p>å½“å‰çš„å›è°ƒçš„requestå’Œéœ€è¦è¯·æ±‚çš„requestæ˜¯ä¸æ˜¯ä¸ºåŒä¸€ä¸ªï¼Œæ˜¯çš„è¯åˆ™åˆ¤æ–­ä¸ºé‡å¤è°ƒç”¨ï¼Œç›´æ¥è¿”å›ã€‚</p>
</li>
<li><p>å¼€å§‹è¯·æ±‚å‰ï¼Œå…ˆå–æ¶ˆä¹‹å‰çš„task,å³è§£ç»‘å›è°ƒã€‚</p>
</li>
<li><p>ä»ç¼“å­˜ä¸­æ ¹æ®è¿™ä¸ªè¯·æ±‚è·å–ç¼“å­˜,å¦‚æœæœ‰ç¼“å­˜åˆ™ç›´æ¥å›è°ƒæˆåŠŸæ–¹æ³•å—ã€‚ï¼ˆè¿™é‡Œå’Œåé¢è®¾ç½®ä»ç½‘ç»œè¯·æ±‚æ•°æ®ä¸­è®¾ç½®çš„ç¼“å­˜ç­–ç•¥ç›¸å¯¹åº”ï¼‰</p>
</li>
<li><p>æ— ç¼“å­˜æœ‰å ä½ç¬¦å›¾ç‰‡åˆ™è®¾ç½®å ä½ç¬¦å›¾ç‰‡ã€‚ç„¶åå»ä¸‹è½½å›¾ç‰‡ï¼Œå¹¶å¾—åˆ°ä¸€ä¸ªreceipt(AFImageDownloadReceiptå¯¹è±¡)ï¼Œå¯ä»¥ç”¨æ¥å–æ¶ˆå›è°ƒï¼Œåˆ†åˆ«ä¼ å…¥æˆåŠŸå›è°ƒæ–¹æ³•å— <strong>(åˆ¤æ–­receiptIDå’ŒdownloadIDæ˜¯å¦ç›¸åŒ æˆåŠŸå›è°ƒï¼Œè®¾ç½®å›¾ç‰‡ï¼Œæ¸…ç©ºreceipt)</strong> å’Œå¤±è´¥å›è°ƒæ–¹æ³•å— <strong>(æ¸…ç©ºreceiptï¼Œå›è°ƒä¸Šå±‚å¤±è´¥æ–¹æ³•å—)</strong></p>
</li>
</ul>
<h3 id="ç„¶åæ˜¯AFImageDownloaderç±»"><a href="#ç„¶åæ˜¯AFImageDownloaderç±»" class="headerlink" title="ç„¶åæ˜¯AFImageDownloaderç±»"></a><a href="https://github.com/MyExam-hu/SummaryPro/blob/master/Pods/AFNetworking/UIKit%2BAFNetworking/AFImageDownloader.m" target="_blank" rel="external">ç„¶åæ˜¯AFImageDownloaderç±»</a></h3><p>è¿™ä¸ªç±»é‡Œé¢çš„æ–¹æ³•ä¸»è¦è´Ÿè´£ä»ç½‘ç»œåŠ è½½å›¾ç‰‡ï¼Œå½“ç„¶å¦‚æœæœ¬åœ°æœ‰ç¼“å­˜ä¹Ÿä¼šä¼˜å…ˆè·å–ç¼“å­˜</p>
<p><strong>ä¸»è¦æ–¹æ³•downloadImageForURLRequest:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">- (nullable AFImageDownloadReceipt *)downloadImageForURLRequest:(NSURLRequest *)request</div><div class="line">                                                  withReceiptID:(nonnull NSUUID *)receiptID</div><div class="line">                                                        success:(nullable void (^)(NSURLRequest *request, NSHTTPURLResponse  * _Nullable response, UIImage *responseObject))success</div><div class="line">                                                        failure:(nullable void (^)(NSURLRequest *request, NSHTTPURLResponse * _Nullable response, NSError *error))failure</div></pre></td></tr></table></figure>
<p>è¯¥æ–¹æ³•ä¸»è¦åšäº†å¦‚ä¸‹å‡ ä»¶äº‹(æ–¹æ³•é‡Œé¢çš†ä¸ºåŒæ­¥ä¸²è¡Œå¤„ç†):</p>
<ul>
<li><p>åˆ¤æ–­è¯·æ±‚çš„urlæ˜¯å¦ä¸ºç©ºï¼Œå¦‚æœä¸ºç©ºåˆ™ç›´æ¥è¿”å›é”™è¯¯ä¿¡æ¯ã€‚</p>
</li>
<li><p>åˆ¤æ–­è¿™ä¸ªä»»åŠ¡æ˜¯å¦å·²ç»å­˜åœ¨ï¼Œå­˜åœ¨åˆ™æ·»åŠ æˆåŠŸå¤±è´¥Block,ç„¶åç›´æ¥è¿”å›ï¼Œå³ä¸€ä¸ªurlç”¨ä¸€ä¸ªrequest,å¯ä»¥å“åº”å¥½å‡ ä¸ªblock(é˜²æ­¢é‡å¤è¯·æ±‚)</p>
</li>
<li><p>æ ¹æ®requestçš„ç¼“å­˜ç­–ç•¥ï¼ŒåŠ è½½ç¼“å­˜ï¼Œå¦‚æœæœ‰ç¼“å­˜åˆ™ç›´æ¥åŠ è½½æˆåŠŸæ–¹æ³•å—(ç¼“å­˜ç±»AFAutoPurgingImageCacheä¸‹é¢æ€»ç»“)</p>
</li>
</ul>
<ul>
<li>ç”¨sessionManager(AFHTTPSessionManager)å»è¯·æ±‚ï¼Œæ³¨æ„ï¼Œåªæ˜¯åˆ›å»ºtask,è¿˜æ˜¯æŒ‚èµ·çŠ¶æ€ã€‚å›è°ƒå¤„ç†æ–¹æ³•å—å¦‚ä¸‹(æ–¹æ³•é‡Œé¢çš†ä¸ºå¼‚æ­¥å¹¶è¡Œå¤„ç†)ï¼š<ul>
<li>è¯·æ±‚å®Œæ¯•ï¼Œå®‰å…¨ç§»é™¤AF taskï¼Œå¹¶è¿”å›å½“å‰è¢«ç§»é™¤çš„AF task</li>
<li>å¦‚æœè¯·æ±‚å¤±è´¥åˆ™éå†AF taské‡Œé¢çš„å¤±è´¥æ–¹æ³•ï¼Œå¹¶åœ¨ä¸»çº¿ç¨‹é‡Œé¢å›è°ƒ</li>
<li>å¦‚æœè¯·æ±‚æˆåŠŸåˆ™éå†AF taské‡Œé¢çš„æˆåŠŸæ–¹æ³•ï¼Œå¹¶åœ¨ä¸»çº¿ç¨‹é‡Œé¢å›è°ƒ</li>
<li>å›è°ƒå®Œæˆï¼Œå‡å°‘æ´»è·ƒçš„ä»»åŠ¡æ•°ï¼Œå¦‚æœå¯ä»¥ï¼Œåˆ™å¼€å¯ä¸‹ä¸€ä¸ªä»»åŠ¡</li>
</ul>
</li>
</ul>
<ul>
<li><p>æ ¹æ®createdTaskä»»åŠ¡åˆ›å»ºmergedTaskå¹¶å¾€å½“å‰ä»»åŠ¡å­—å…¸é‡Œæ·»åŠ ä»»åŠ¡</p>
</li>
<li><p>åˆ¤æ–­å½“å‰å¹¶è¡Œé™åˆ¶æ•°ï¼Œå¦‚æœå°äºï¼Œåˆ™å¼€å§‹ä»»åŠ¡ä¸‹è½½resumeï¼Œå¦åˆ™ç­‰å¾…</p>
</li>
<li><p>ç„¶ååˆ™å›åˆ°AFé‡Œé¢çš„å„ç§å§”æ‰˜å›è°ƒäº†</p>
</li>
</ul>
<h3 id="æ¥ä¸‹æ¥æ˜¯AFAutoPurgingImageCacheç±»"><a href="#æ¥ä¸‹æ¥æ˜¯AFAutoPurgingImageCacheç±»" class="headerlink" title="æ¥ä¸‹æ¥æ˜¯AFAutoPurgingImageCacheç±»"></a><a href="https://github.com/MyExam-hu/SummaryPro/blob/master/Pods/AFNetworking/UIKit%2BAFNetworking/AFAutoPurgingImageCache.m" target="_blank" rel="external">æ¥ä¸‹æ¥æ˜¯AFAutoPurgingImageCacheç±»</a></h3><p>ä¸»è¦æ–¹æ³•æ˜¯addImageï¼Œä½œç”¨æ˜¯ç”¨æ¥æ·»åŠ imageåˆ°cacheé‡Œé‡Œé¢ï¼ŒåŒæ—¶è¿™ä¸ªæ–¹æ³•ä¼šåˆ¤æ–­å½“å‰çš„ç¼“å­˜æ˜¯å¦æœ‰æº¢å‡ºï¼Œå¦‚æœæœ‰æº¢å‡ºåˆ™ä¼šæ ¹æ®æ—¶é—´çš„æ’åºå–å‡ºæœ€æ—©æ—¶å€™çš„ç¼“å­˜ä¸æ–­æ¸…é™¤ï¼ŒçŸ¥é“åˆ°è¾¾æ²¡æœ‰æº¢å‡ºæœ€å¤§è®¾ç½®ç¼“å­˜ä¸ºæ­¢ã€‚æ–¹æ³•æ¯”è¾ƒç®€å•ï¼Œç›´æ¥ç‚¹é“¾æ¥çœ‹å§!</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/02/11/runtime/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="echo.hu">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/uploads/headImage.png">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="echo.hu">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="echo.hu" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/02/11/runtime/" itemprop="url">
                  runtimeç¬”è®°
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-02-11T14:06:22+08:00">
                2017-02-11
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/02/11/runtime/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/02/11/runtime/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2017/02/11/runtime/" class="leancloud_visitors" data-flag-title="runtimeç¬”è®°">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•° </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="è·å–åˆ—è¡¨"><a href="#è·å–åˆ—è¡¨" class="headerlink" title="è·å–åˆ—è¡¨"></a>è·å–åˆ—è¡¨</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line">-(void)runtimeLearn&#123;</div><div class="line">    unsigned int count;</div><div class="line">    //è·å–å±æ€§åˆ—è¡¨</div><div class="line">    objc_property_t *propertyList = class_copyPropertyList([clsDogName class], &amp;count);</div><div class="line">    for (unsigned int i=0; i&lt;count; i++) &#123;</div><div class="line">        const char *propertyName = property_getName(propertyList[i]);</div><div class="line">        NSLog(@&quot;property----&gt;%@&quot;, [NSString stringWithUTF8String:propertyName]);</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    //è·å–æ–¹æ³•åˆ—è¡¨</div><div class="line">    Method *methodList = class_copyMethodList([clsDogName class], &amp;count);</div><div class="line">    for (unsigned int i; i&lt;count; i++) &#123;</div><div class="line">        Method method = methodList[i];</div><div class="line">        NSLog(@&quot;method----&gt;%@&quot;, NSStringFromSelector(method_getName(method)));</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    //è·å–æˆå‘˜å˜é‡åˆ—è¡¨</div><div class="line">    Ivar *ivarList = class_copyIvarList([clsDogName class], &amp;count);</div><div class="line">    for (unsigned int i; i&lt;count; i++) &#123;</div><div class="line">        Ivar myIvar = ivarList[i];</div><div class="line">        const char *ivarName = ivar_getName(myIvar);</div><div class="line">        NSLog(@&quot;Ivar----&gt;%@&quot;, [NSString stringWithUTF8String:ivarName]);</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    //è·å–åè®®åˆ—è¡¨</div><div class="line">    __unsafe_unretained Protocol **protocolList = class_copyProtocolList([clsDogName class], &amp;count);</div><div class="line">    for (unsigned int i; i&lt;count; i++) &#123;</div><div class="line">        Protocol *myProtocal = protocolList[i];</div><div class="line">        const char *protocolName = protocol_getName(myProtocal);</div><div class="line">        NSLog(@&quot;protocol----&gt;%@&quot;, [NSString stringWithUTF8String:protocolName]);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è§£æå„ç§å¥‡æ€ªæ•°æ®çš„æ—¶å€™å¯ä»¥ä½¿ç”¨è¿™äº›æ–¹æ³•è·å–ç‰¹å®šçš„æ–¹æ³•åå­—æˆ–è€…å±æ€§åå­—æ¥å®Œæˆå„ç§éœ€æ±‚,åŒ…æ‹¬MJExtensionè§£æçš„ä¸»è¦å®ç°æ–¹æ³•éƒ½æœ‰ä½¿ç”¨åˆ°ã€‚</p>
<h3 id="æ–¹æ³•äº¤æ¢"><a href="#æ–¹æ³•äº¤æ¢" class="headerlink" title="æ–¹æ³•äº¤æ¢"></a>æ–¹æ³•äº¤æ¢</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Method originalMethod=class_getInstanceMethod([NSString class], @selector(lowercaseString));</div><div class="line">Method swappedMethod=class_getInstanceMethod([NSString class], @selector(eoc_myLowercaseString));</div><div class="line">method_exchangeImplementations(originalMethod, swappedMethod);</div></pre></td></tr></table></figure>
<p>æ›¿æ¢ä¸¤ä¸ªæ–¹æ³•çš„å®ç°è¾¾åˆ°è¾“å‡ºæµ‹è¯•ç»“æœçš„ç›®çš„(ä½œç”¨èŒƒå›´,æ•´ä¸ªè¿è¡ŒæœŸ),æˆ–è€…å¦‚AFNetworkingä¸­çš„æ›¿æ¢æ‰NSUrlSessionä¸­çš„resumeå’Œsuspendæ–¹æ³•ä¸ºè‡ªèº«é€»è¾‘æœåŠ¡.</p>
<h3 id="å…³è”å¯¹è±¡æ–¹æ³•çš„ä½¿ç”¨"><a href="#å…³è”å¯¹è±¡æ–¹æ³•çš„ä½¿ç”¨" class="headerlink" title="å…³è”å¯¹è±¡æ–¹æ³•çš„ä½¿ç”¨"></a>å…³è”å¯¹è±¡æ–¹æ³•çš„ä½¿ç”¨</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">-(void)loadAlertView&#123;</div><div class="line">    UIAlertView *alert=[[UIAlertView alloc] initWithTitle:@&quot;Question&quot; message:@&quot;2333&quot; delegate:self cancelButtonTitle:@&quot;Cancel&quot; otherButtonTitles:@&quot;Submit&quot;, nil];</div><div class="line">    void (^block)(NSInteger) = ^(NSInteger btnIndex)&#123;</div><div class="line">        if (btnIndex==0) &#123;</div><div class="line">            NSLog(@&quot;0000&quot;);</div><div class="line">        &#125;else&#123;</div><div class="line">            NSLog(@&quot;other&quot;);</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    objc_setAssociatedObject(alert, EOCMYAlertViewKey, block, OBJC_ASSOCIATION_COPY);</div><div class="line">    [alert show];</div><div class="line">&#125;</div><div class="line"></div><div class="line">#pragma mark - UIAlertViewDelegate</div><div class="line">- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex NS_DEPRECATED_IOS(2_0, 9_0)&#123;</div><div class="line">    void (^block)(NSInteger)=objc_getAssociatedObject(alertView, EOCMYAlertViewKey);</div><div class="line">    block(buttonIndex);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä½¿ç”¨å…³è”å¯¹è±¡æ–¹æ³•å¯ä»¥æŠŠé€»è¾‘é›†ä¸­å†™åœ¨å®šä¹‰æ§ä»¶çš„åœ°æ–¹ä½¿å¾—é€»è¾‘ä¸ä¼šè¿‡äºåˆ†æ•£.</p>
<h3 id="æ‹¦æˆªè°ƒç”¨"><a href="#æ‹¦æˆªè°ƒç”¨" class="headerlink" title="æ‹¦æˆªè°ƒç”¨"></a>æ‹¦æˆªè°ƒç”¨</h3><p>ç¨‹åºæ‰§è¡Œä¸­ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°æ–¹æ³•å°±ä¼šè½¬å‘æ‹¦æˆªè°ƒç”¨ã€‚æ‹¦æˆªè°ƒç”¨å°±æ˜¯ï¼Œåœ¨æ‰¾ä¸åˆ°è°ƒç”¨çš„æ–¹æ³•ç¨‹åºå´©æºƒä¹‹å‰ï¼Œä½ æœ‰æœºä¼šé€šè¿‡é‡å†™NSObjectçš„å››ä¸ªæ–¹æ³•æ¥å¤„ç†ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">+ (BOOL)resolveClassMethod:(SEL)sel;</div><div class="line">+ (BOOL)resolveInstanceMethod:(SEL)sel;</div><div class="line">//åä¸¤ä¸ªæ–¹æ³•éœ€è¦è½¬å‘åˆ°å…¶ä»–çš„ç±»å¤„ç†</div><div class="line">- (id)forwardingTargetForSelector:(SEL)aSelector;</div><div class="line">- (void)forwardInvocation:(NSInvocation *)anInvocation;</div></pre></td></tr></table></figure>
<ul>
<li>ç¬¬ä¸€ä¸ªæ–¹æ³•æ˜¯å½“ä½ è°ƒç”¨ä¸€ä¸ªä¸å­˜åœ¨çš„ç±»æ–¹æ³•çš„æ—¶å€™ï¼Œä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œé»˜è®¤è¿”å›NOï¼Œä½ å¯ä»¥åŠ ä¸Šè‡ªå·±çš„å¤„ç†ç„¶åè¿”å›YESã€‚</li>
<li>ç¬¬äºŒä¸ªæ–¹æ³•å’Œç¬¬ä¸€ä¸ªæ–¹æ³•ç›¸ä¼¼ï¼Œåªä¸è¿‡å¤„ç†çš„æ˜¯å®ä¾‹æ–¹æ³•ã€‚</li>
<li>ç¬¬ä¸‰ä¸ªæ–¹æ³•æ˜¯å°†ä½ è°ƒç”¨çš„ä¸å­˜åœ¨çš„æ–¹æ³•é‡å®šå‘åˆ°ä¸€ä¸ªå…¶ä»–å£°æ˜äº†è¿™ä¸ªæ–¹æ³•çš„ç±»ï¼Œåªéœ€è¦ä½ è¿”å›ä¸€ä¸ªæœ‰è¿™ä¸ªæ–¹æ³•çš„targetã€‚</li>
<li>ç¬¬å››ä¸ªæ–¹æ³•æ˜¯å°†ä½ è°ƒç”¨çš„ä¸å­˜åœ¨çš„æ–¹æ³•æ‰“åŒ…æˆNSInvocationä¼ ç»™ä½ ã€‚åšå®Œä½ è‡ªå·±çš„å¤„ç†åï¼Œè°ƒç”¨invokeWithTarget:æ–¹æ³•è®©æŸä¸ªtargetè§¦å‘è¿™ä¸ªæ–¹æ³•ã€‚</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/02/09/å¤šçº¿ç¨‹/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="echo.hu">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/uploads/headImage.png">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="echo.hu">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="echo.hu" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/02/09/å¤šçº¿ç¨‹/" itemprop="url">
                  å¤šçº¿ç¨‹ç¬”è®°
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-02-09T14:06:22+08:00">
                2017-02-09
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/02/09/å¤šçº¿ç¨‹/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/02/09/å¤šçº¿ç¨‹/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2017/02/09/å¤šçº¿ç¨‹/" class="leancloud_visitors" data-flag-title="å¤šçº¿ç¨‹ç¬”è®°">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•° </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>æ¯æ¬¡çœ‹å®Œå°±å¿˜,è¿˜æ˜¯æ€»ç»“ä¸‹.</p>
<h3 id="çº¿ç¨‹çš„åˆ›å»º"><a href="#çº¿ç¨‹çš„åˆ›å»º" class="headerlink" title="çº¿ç¨‹çš„åˆ›å»º"></a>çº¿ç¨‹çš„åˆ›å»º</h3><p>ä¸¤ç§çº¿ç¨‹çš„åˆ›å»ºæ–¹æ³•</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">//è·å–å…¨å±€å¹¶è¡Œçº¿ç¨‹,ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºä¼˜å…ˆçº§</div><div class="line">self.syscQueue=dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);</div><div class="line"></div><div class="line">//ä¸²è¡Œé˜Ÿåˆ—åˆ›å»º,å½“ç¬¬äºŒä¸ªå‚æ•°ä¸ºDISPATCH_QUEUE_CONCURRENTæ—¶åˆ›å»ºçš„æ˜¯å¹¶è¡Œé˜Ÿåˆ—,å¤šä¸ªä¸²è¡Œé˜Ÿåˆ—å¯ä»¥å¹¶åˆ—æ‰§è¡Œ.</div><div class="line">dispatch_queue_t serialQueue=dispatch_queue_create(&quot;com.zxd.hwd&quot;, DISPATCH_QUEUE_SERIAL);</div></pre></td></tr></table></figure>
<h3 id="å¼‚æ­¥dispatch-async"><a href="#å¼‚æ­¥dispatch-async" class="headerlink" title="å¼‚æ­¥dispatch_async"></a>å¼‚æ­¥dispatch_async</h3><p>æŠŠä¸¤ä¸ªä»»åŠ¡æ·»åŠ åˆ°å…¨å±€é˜Ÿåˆ—é‡Œé¢è®©ä»–ä»¬å¹¶è¡Œè¿è¡Œ,å› ä¸ºæœ€åä¸€å¥è¾“å‡ºè¯­å¥æ˜¯åœ¨ä¸»çº¿ç¨‹è¿è¡Œçš„,æ‰€ä»¥ä¼šä¸ä¸¤ä¸ªä»»åŠ¡çš„çº¿ç¨‹å¹¶è¡Œè¿è¡Œ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line">//å¹¶è¡Œé˜Ÿåˆ—,é˜Ÿåˆ—é‡Œé¢çš„ä¸œè¥¿è¿è¡Œæ—¶ä¸²è¡Œçš„,é˜Ÿåˆ—ä¹‹é—´æ˜¯å¹¶è¡Œè¿è¡Œçš„</div><div class="line">dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123;</div><div class="line">    for (int i=0; i&lt;5; i++) &#123;</div><div class="line">        NSLog(@&quot;å¹¶è¡ŒFirst task %d&quot;,i);</div><div class="line">        sleep(1);</div><div class="line">    &#125;</div><div class="line">&#125;);</div><div class="line"></div><div class="line">dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123;</div><div class="line">    for (int j=0; j&lt;5; j++) &#123;</div><div class="line">        NSLog(@&quot;å¹¶è¡ŒSecond task %d&quot;,j);</div><div class="line">        sleep(1);</div><div class="line">    &#125;</div><div class="line">&#125;);</div><div class="line">NSLog(@&quot;å¹¶è¡Œdispatch is over&quot;);</div><div class="line"></div><div class="line">//ä¸²è¡Œé˜Ÿåˆ—</div><div class="line">dispatch_queue_t serialQueue=dispatch_queue_create(&quot;com.zxd.hwd&quot;, DISPATCH_QUEUE_SERIAL);</div><div class="line">dispatch_async(serialQueue, ^&#123;</div><div class="line">    for (int i=0; i&lt;5; i++) &#123;</div><div class="line">        NSLog(@&quot;ä¸²è¡ŒFirst task %d&quot;,i);</div><div class="line">        sleep(1);</div><div class="line">    &#125;</div><div class="line">&#125;);</div><div class="line"></div><div class="line">dispatch_async(serialQueue, ^&#123;</div><div class="line">    for (int j=0; j&lt;5; j++) &#123;</div><div class="line">        NSLog(@&quot;ä¸²è¡ŒSecond task %d&quot;,j);</div><div class="line">        sleep(1);</div><div class="line">    &#125;</div><div class="line">&#125;);</div><div class="line">NSLog(@&quot;ä¸²è¡Œdispatch is over&quot;);</div></pre></td></tr></table></figure>
<h3 id="åŒæ­¥dispatch-sync"><a href="#åŒæ­¥dispatch-sync" class="headerlink" title="åŒæ­¥dispatch_sync"></a>åŒæ­¥dispatch_sync</h3><p>åœ¨å…¨å±€çº¿ç¨‹ä¸Šé¢åŒæ­¥è¿è¡Œ,ç¬¬ä¸€ä¸ªä»»åŠ¡æ‰§è¡Œå®Œæ¯•æ‰å¼€å§‹æ‰§è¡Œç¬¬äºŒä¸ªä»»åŠ¡.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">dispatch_sync(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123;</div><div class="line">        NSLog(@&quot;3333&quot;);</div><div class="line">        sleep(1);</div><div class="line">    &#125;);</div><div class="line">dispatch_sync(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123;</div><div class="line">        NSLog(@&quot;2333&quot;);</div><div class="line">    &#125;);</div></pre></td></tr></table></figure>
<h3 id="dispatch-after"><a href="#dispatch-after" class="headerlink" title="dispatch_after"></a>dispatch_after</h3><p>å»¶è¿Ÿä¸€æ®µæ—¶é—´æŠŠä¸€é¡¹ä»»åŠ¡æäº¤åˆ°é˜Ÿåˆ—ä¸­æ‰§è¡Œ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(5.0 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^&#123;</div><div class="line">        NSLog(@&quot;å»¶è¿Ÿ&quot;);</div><div class="line">    &#125;);</div></pre></td></tr></table></figure>
<h3 id="dispatch-apply"><a href="#dispatch-apply" class="headerlink" title="dispatch_apply"></a>dispatch_apply</h3><p>æŠŠä¸€é¡¹ä»»åŠ¡æäº¤åˆ°é˜Ÿåˆ—ä¸­å¤šæ¬¡æ‰§è¡Œ,å…·ä½“æ˜¯å¹¶è¡Œæ‰§è¡Œè¿˜æ˜¯ä¸²è¡Œæ‰§è¡Œç”±é˜Ÿåˆ—æœ¬èº«å†³å®š.æ³¨æ„,dispatch_applyä¸ä¼šç«‹åˆ»è¿”å›,åœ¨æ‰§è¡Œå®Œæ¯•åæ‰ä¼šè¿”å›,æ˜¯åŒæ­¥çš„è°ƒç”¨.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">NSArray *list=@[@&quot;hello&quot;,@&quot;hwd&quot;,@&quot;hello world&quot;];</div><div class="line">dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123;</div><div class="line">    dispatch_apply(3, dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^(size_t index) &#123;</div><div class="line">        //ç›¸å¯¹ä¸»é˜Ÿåˆ—(ä¸»çº¿ç¨‹)æ˜¯å¼‚æ­¥çš„ï¼Œåœ¨globalé˜Ÿåˆ—ä¸­æ˜¯å¹¶è¡Œæ‰§è¡Œçš„</div><div class="line">        NSString *str=list[index];</div><div class="line">        NSLog(@&quot;%lu&quot;,(unsigned long)str.length);</div><div class="line">    &#125;);</div><div class="line">    NSLog(@&quot;Dispatch_after in global queue is over&quot;);</div><div class="line">&#125;);</div><div class="line">NSLog(@&quot;Dispatch_after in main queue is over&quot;);</div></pre></td></tr></table></figure>
<h3 id="dispatch-once"><a href="#dispatch-once" class="headerlink" title="dispatch_once"></a>dispatch_once</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">static dispatch_once_t onceToken;</div><div class="line">dispatch_once(&amp;onceToken, ^&#123;</div><div class="line">    //ä¿è¯åœ¨APPè¿è¡ŒæœŸé—´ï¼Œblockä¸­çš„ä»£ç åªæ‰§è¡Œä¸€æ¬¡çš„ä»£ç¢¼</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h3 id="dispatch-group-t"><a href="#dispatch-group-t" class="headerlink" title="dispatch_group_t"></a>dispatch_group_t</h3><p>æƒ³è¦åœ¨æ‰€ä»¥å¹¶è¡Œçº¿ç¨‹æ‰§è¡Œå®Œæ¯•åæ‰§è¡ŒæŸä¸ªä»»åŠ¡é€šå¸¸ç”¨åˆ°dispatch_group_t</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">dispatch_group_t hwdGroup=dispatch_group_create();</div><div class="line">//å…¨å±€é˜Ÿåˆ—ï¼Œè¿™ä¸ªé˜Ÿåˆ—ä¸ºå¹¶è¡Œé˜Ÿåˆ—</div><div class="line">dispatch_queue_t globalQueueDefault=dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);</div><div class="line">//åˆ›å»ºä¸€ä¸ªç”¨æˆ·é˜Ÿåˆ—ï¼Œè¿™ä¸ªé˜Ÿåˆ—ä¸ºä¸²è¡Œé˜Ÿåˆ—</div><div class="line">dispatch_queue_t userCreateQueue=dispatch_queue_create(&quot;com.test.helloHwc&quot;,DISPATCH_QUEUE_SERIAL);</div><div class="line">[self downLoadTask1:hwdGroup :globalQueueDefault];</div><div class="line">[self downLoadTask2:hwdGroup :userCreateQueue];</div><div class="line">[self downLoadTask3:hwdGroup :userCreateQueue];</div><div class="line"></div><div class="line">dispatch_group_notify(hwdGroup, dispatch_get_main_queue(), ^&#123;</div><div class="line">    NSLog(@&quot;Group tasks are done&quot;);</div><div class="line">&#125;);</div><div class="line">NSLog(@&quot;Now viewDidLoad is done&quot;);</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">-(void)downLoadTask1 :(dispatch_group_t)group :(dispatch_queue_t)queue&#123;</div><div class="line">    dispatch_group_async(group, queue, ^&#123;</div><div class="line">        sleep(3);</div><div class="line">        NSLog(@&quot;Task1 is done&quot;);</div><div class="line">    &#125;);</div><div class="line">&#125;</div><div class="line"></div><div class="line">-(void)downLoadTask2 :(dispatch_group_t)group :(dispatch_queue_t)queue&#123;</div><div class="line">    dispatch_group_async(group, queue, ^&#123;</div><div class="line">        sleep(3);</div><div class="line">        NSLog(@&quot;Task2 is done&quot;);</div><div class="line">    &#125;);</div><div class="line">&#125;</div><div class="line"></div><div class="line">-(void)downLoadTask3 :(dispatch_group_t)group :(dispatch_queue_t)queue&#123;</div><div class="line">    dispatch_group_async(group, queue, ^&#123;</div><div class="line">        sleep(3);</div><div class="line">        NSLog(@&quot;Task3 is done&quot;);</div><div class="line">    &#125;);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="dispatch-semaphore-create"><a href="#dispatch-semaphore-create" class="headerlink" title="dispatch_semaphore_create"></a>dispatch_semaphore_create</h3><p>é€šå¸¸ç”¨æ¥æ§åˆ¶å¹¶å‘çº¿ç¨‹çš„æ•°é‡</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">//åˆ›å»ºä¸€ä¸ªä¿¡å·é‡dispatch_semaphore_create</div><div class="line">//æé«˜ä¿¡å·é‡dispatch_semaphore_signal</div><div class="line">//ç­‰å¾…é™ä½ä¿¡å·é‡dispatch_semaphore_wait</div><div class="line">self.semaphore=dispatch_semaphore_create(1);</div><div class="line">dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123;</div><div class="line">    [self task_first];</div><div class="line">&#125;);</div><div class="line"></div><div class="line">dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123;</div><div class="line">    [self task_second];</div><div class="line">&#125;);</div><div class="line"></div><div class="line">dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123;</div><div class="line">    [self task_third];</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">-(void)task_first&#123;</div><div class="line">    //å½“ä¿¡å·æ€»é‡å°‘äº0çš„æ—¶å€™å°±ä¼šä¸€ç›´ç­‰å¾…ï¼Œå¦åˆ™å°±å¯ä»¥æ­£å¸¸çš„æ‰§è¡Œï¼Œå¹¶è®©ä¿¡å·æ€»é‡-1</div><div class="line">    dispatch_semaphore_wait(self.semaphore, DISPATCH_TIME_FOREVER);</div><div class="line">    NSLog(@&quot;First task starting&quot;);</div><div class="line">    sleep(1);</div><div class="line">    NSLog(@&quot;First task is done&quot;);</div><div class="line">    //æ˜¯å‘é€ä¸€ä¸ªä¿¡å·ï¼Œè‡ªç„¶ä¼šè®©ä¿¡å·æ€»é‡åŠ 1</div><div class="line">    dispatch_semaphore_signal(self.semaphore);</div><div class="line">&#125;</div><div class="line"></div><div class="line">-(void)task_second&#123;</div><div class="line">    dispatch_semaphore_wait(self.semaphore, DISPATCH_TIME_FOREVER);</div><div class="line">    NSLog(@&quot;Second task starting&quot;);</div><div class="line">    sleep(1);</div><div class="line">    NSLog(@&quot;Second task is done&quot;);</div><div class="line">    dispatch_semaphore_signal(self.semaphore);</div><div class="line">&#125;</div><div class="line"></div><div class="line">-(void)task_third&#123;</div><div class="line">    dispatch_semaphore_wait(self.semaphore, DISPATCH_TIME_FOREVER);</div><div class="line">    NSLog(@&quot;Thrid task starting&quot;);</div><div class="line">    sleep(1);</div><div class="line">    NSLog(@&quot;Thrid task is done&quot;);</div><div class="line">    dispatch_semaphore_signal(self.semaphore);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="æ­»é”"><a href="#æ­»é”" class="headerlink" title="æ­»é”"></a>æ­»é”</h3><ul>
<li>æ­»é”æ¡ˆä¾‹ä¸€</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">NSLog(@&quot;1&quot;); // ä»»åŠ¡1</div><div class="line">dispatch_sync(dispatch_get_main_queue(), ^&#123;</div><div class="line">    NSLog(@&quot;2&quot;); // ä»»åŠ¡2</div><div class="line">&#125;);</div><div class="line">NSLog(@&quot;3&quot;); // ä»»åŠ¡3</div></pre></td></tr></table></figure>
<p>å› ä¸ºä»»åŠ¡2è¢«åŒæ­¥æ·»åŠ è¿›ä¸»çº¿ç¨‹,æ‰€ä»¥ä»»åŠ¡2éœ€è¦ç­‰å¾…ä»»åŠ¡3æ‰§è¡Œå®Œæ¯•åæ‰èƒ½æ‰§è¡Œ,è€Œå› ä¸ºæ˜¯åŒæ­¥ä»»åŠ¡3éœ€è¦ç­‰å¾…ä»»åŠ¡2æ‰§è¡Œå®Œæ¯•æ‰èƒ½æ‰§è¡Œ,æ‰€ä»¥é€ æˆä¸»çº¿ç¨‹é˜»å¡(æ­»é”)ã€‚</p>
<ul>
<li>æ­»é”æ¡ˆä¾‹äºŒ</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">dispatch_async(dispatch_get_global_queue(0, 0), ^&#123;</div><div class="line">    NSLog(@&quot;1&quot;); // ä»»åŠ¡1</div><div class="line">    dispatch_sync(dispatch_get_main_queue(), ^&#123;</div><div class="line">        NSLog(@&quot;2&quot;); // ä»»åŠ¡2</div><div class="line">    &#125;);</div><div class="line">    NSLog(@&quot;3&quot;); // ä»»åŠ¡3</div><div class="line">&#125;);</div><div class="line">NSLog(@&quot;4&quot;); // ä»»åŠ¡4</div><div class="line">while (1) &#123;</div><div class="line">&#125;</div><div class="line">NSLog(@&quot;5&quot;); // ä»»åŠ¡5</div></pre></td></tr></table></figure>
<p>æ§åˆ¶å°è¾“å‡ºï¼š1 4 ,1å’Œ4çš„é¡ºåºä¸ä¸€å®š</p>
<h3 id="çº¿ç¨‹æ¡ˆä¾‹"><a href="#çº¿ç¨‹æ¡ˆä¾‹" class="headerlink" title="çº¿ç¨‹æ¡ˆä¾‹"></a>çº¿ç¨‹æ¡ˆä¾‹</h3><ul>
<li>çº¿ç¨‹æ¡ˆä¾‹ä¸€</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">dispatch_queue_t queue = dispatch_queue_create(&quot;com.demo.serialQueue&quot;, DISPATCH_QUEUE_SERIAL);</div><div class="line">    NSLog(@&quot;1&quot;); // ä»»åŠ¡1</div><div class="line">    //æŠŠä»»åŠ¡åŠ å…¥åˆ°é˜Ÿåˆ—queueæœ€åé¢</div><div class="line">    dispatch_async(queue, ^&#123;</div><div class="line">        NSLog(@&quot;2&quot;); // ä»»åŠ¡2</div><div class="line">        dispatch_sync(queue, ^&#123;</div><div class="line">            NSLog(@&quot;3&quot;); // ä»»åŠ¡3</div><div class="line">        &#125;);</div><div class="line">        NSLog(@&quot;4&quot;); // ä»»åŠ¡4</div><div class="line">    &#125;);</div><div class="line">    NSLog(@&quot;5&quot;); // ä»»åŠ¡5</div></pre></td></tr></table></figure>
<p>æ§åˆ¶å°è¾“å‡ºï¼š1 5 2 ,5å’Œ2çš„é¡ºåºä¸ä¸€å®š</p>
<ul>
<li>çº¿ç¨‹æ¡ˆä¾‹äºŒ</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">NSLog(@&quot;1&quot;); // ä»»åŠ¡1</div><div class="line">    dispatch_async(dispatch_get_global_queue(0, 0), ^&#123;</div><div class="line">        NSLog(@&quot;2&quot;); // ä»»åŠ¡2</div><div class="line">        dispatch_sync(dispatch_get_main_queue(), ^&#123;</div><div class="line">            NSLog(@&quot;3&quot;); // ä»»åŠ¡3</div><div class="line">        &#125;);</div><div class="line">        NSLog(@&quot;4&quot;); // ä»»åŠ¡4</div><div class="line">    &#125;);</div><div class="line">    NSLog(@&quot;5&quot;); // ä»»åŠ¡5</div></pre></td></tr></table></figure>
<p>1æœ€å…ˆæ‰§è¡Œï¼›2å’Œ5é¡ºåºä¸ä¸€å®šï¼›4ä¸€å®šåœ¨3åé¢</p>
<ul>
<li>ä¸è¦ä½¿ç”¨dispatch_get_current_queue()è·å–å½“å‰çº¿ç¨‹</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/01/10/æ€»ç»“/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="echo.hu">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/uploads/headImage.png">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="echo.hu">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="echo.hu" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/01/10/æ€»ç»“/" itemprop="url">
                  tipsç¬”è®°æ€»ç»“
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-01-10T12:56:22+08:00">
                2017-01-10
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/01/10/æ€»ç»“/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/01/10/æ€»ç»“/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2017/01/10/æ€»ç»“/" class="leancloud_visitors" data-flag-title="tipsç¬”è®°æ€»ç»“">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•° </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="tableViewCellé‡Œé¢å›¾ç‰‡åœ†è§’ç¦»å±æ¸²æŸ“è§£å†³æ–¹æ¡ˆ"><a href="#tableViewCellé‡Œé¢å›¾ç‰‡åœ†è§’ç¦»å±æ¸²æŸ“è§£å†³æ–¹æ¡ˆ" class="headerlink" title="tableViewCellé‡Œé¢å›¾ç‰‡åœ†è§’ç¦»å±æ¸²æŸ“è§£å†³æ–¹æ¡ˆ"></a>tableViewCellé‡Œé¢å›¾ç‰‡åœ†è§’ç¦»å±æ¸²æŸ“è§£å†³æ–¹æ¡ˆ</h3><p>æ’°å†™ä¸€ä¸ª<a href="https://github.com/MyExam-hu/SummaryPro/blob/master/SummaryPro/Category/UIImageView%2BImageViewRadius.m" target="_blank" rel="external">UIImageViewçš„åˆ†ç±»</a>,åˆ†ç±»ä»¿å†™SDWebImageé‡Œé¢åŠ è½½å›¾ç‰‡çš„æ–¹æ³•æŠŠå›¾ç‰‡åŠ è½½ä¸‹æ¥å,é€šè¿‡<a href="https://github.com/MyExam-hu/SummaryPro/blob/master/SummaryPro/Category/UIImage%2BImageRadius.m" target="_blank" rel="external">å¦å¤–ä¸€ä¸ªUIImageåˆ†ç±»</a>ç”¨è´å¡å°”æ›²çº¿åˆ‡åœ†è§’å¤„ç†,ç„¶åæ ¹æ®å’ŒSDWebImageçš„é€»è¾‘ä¸€æ ·ä¿ç•™åœ†è§’å›¾ç‰‡ç¼“å­˜,æ¸…é™¤åŸæœ‰éåœ†è§’å›¾ç‰‡ç¼“å­˜</p>
<h3 id="å­—å…¸æ·±æµ…æ‹·è´"><a href="#å­—å…¸æ·±æµ…æ‹·è´" class="headerlink" title="å­—å…¸æ·±æµ…æ‹·è´"></a>å­—å…¸æ·±æµ…æ‹·è´</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">NSMutableDictionary *myDic=[@&#123;@&quot;22&quot;:@&quot;33&quot;&#125; mutableCopy];</div><div class="line">NSMutableDictionary *otherDic=myDic;</div><div class="line">//NSMutableDictionary *otherDic=[myDic mutableCopy];</div><div class="line">[otherDic setValue:@&quot;33&quot; forKey:@&quot;44&quot;];</div></pre></td></tr></table></figure>
<p>æ”¹å˜å¯å˜å­—å…¸otherDicæ—¶myDicä¹Ÿä¼šåŒæ—¶æ”¹å˜,æ‰€ä»¥ä½¿ç”¨å¯å˜å­—å…¸æ—¶è¦è®©ä¸¤ä¸ªå­—å…¸ç‹¬ç«‹éœ€è¦æ³¨æ„ä½¿ç”¨mutableCopy.</p>
<h3 id="NSMutableSeté‡Œé¢å°½é‡å°‘ç”¨ä¸å¯å˜å¯¹è±¡"><a href="#NSMutableSeté‡Œé¢å°½é‡å°‘ç”¨ä¸å¯å˜å¯¹è±¡" class="headerlink" title="NSMutableSeté‡Œé¢å°½é‡å°‘ç”¨ä¸å¯å˜å¯¹è±¡"></a>NSMutableSeté‡Œé¢å°½é‡å°‘ç”¨ä¸å¯å˜å¯¹è±¡</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">NSMutableSet *set=[NSMutableSet new];</div><div class="line">NSMutableArray *arrayA=[@[@1,@2] mutableCopy];</div><div class="line">[set addObject:arrayA];</div><div class="line">NSLog(@&quot;set=%@&quot;,set);</div><div class="line">    </div><div class="line">NSMutableArray *arrayB=[@[@1,@2] mutableCopy];</div><div class="line">[set addObject:arrayB];</div><div class="line">NSLog(@&quot;set=%@&quot;,set);</div><div class="line">    </div><div class="line">NSMutableArray *arrayC=[@[@1] mutableCopy];</div><div class="line">//[set addObject:[arrayC copy]];</div><div class="line">[set addObject:arrayC];</div><div class="line">NSLog(@&quot;set=%@&quot;,set);</div><div class="line">    </div><div class="line">[arrayC addObject:@2];</div><div class="line">NSLog(@&quot;set=%@&quot;,set);</div><div class="line">    </div><div class="line">NSSet *setB=[set copy];</div><div class="line">NSLog(@&quot;setB=%@&quot;,setB);</div></pre></td></tr></table></figure>
<p>å¦‚ä¸Šé¢ä»£ç æ‰€ç¤ºä½¿ç”¨å¯å˜å¯¹è±¡æ—¶ä¼šå‡ºç°é‡Œé¢æœ‰ç›¸åŒå…ƒç´ çš„æƒ…å†µ,è€Œå½“é‡æ–°å°†å…¶æµ…æ‹·è´çš„æ—¶å€™åˆ™é‡Œé¢å†…å®¹ä¼šè½¬å›ä¸å¯å˜å¯¹è±¡,æ‰€ä»¥æ‰ä¼šæ¢å¤æ­£å¸¸.</p>
<h3 id="æ‰“å°è¾“å‡ºé»‘ç§‘æŠ€"><a href="#æ‰“å°è¾“å‡ºé»‘ç§‘æŠ€" class="headerlink" title="æ‰“å°è¾“å‡ºé»‘ç§‘æŠ€"></a>æ‰“å°è¾“å‡ºé»‘ç§‘æŠ€</h3><p>é‡å†™å®ä½“ç±»å¦‚ä¸‹æ–¹æ³•ç„¶åå°±å¯ä»¥ç›´æ¥é€šè¿‡NSLog(@â€cls=%@â€,cls)è¾“å‡ºå®šåˆ¶çš„å†…å®¹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">- (NSString *)description &#123;</div><div class="line">    return [NSString stringWithFormat:@&quot;&lt;%@: %p, %@&quot;, [self class],self,@&#123;@&quot;youName&quot;:_youName,                                                                                             @&quot;myName&quot;:_myName&#125;];</div><div class="line">&#125;</div><div class="line">//debugç¯å¢ƒä¸‹</div><div class="line">- (NSString *)debugDescription &#123;</div><div class="line">//    return [NSString stringWithFormat:@&quot;&lt;%@: %p, %@&quot;, [self class],self,@&#123;@&quot;youName&quot;:_youName,</div><div class="line">//                                                                          @&quot;myName&quot;:_myName&#125;];</div><div class="line">    return [self description];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="åŸºäºè¿è¡ŒæœŸOCçš„Getæ–¹æ³•å’ŒSetæ–¹æ³•çš„å®ç°"><a href="#åŸºäºè¿è¡ŒæœŸOCçš„Getæ–¹æ³•å’ŒSetæ–¹æ³•çš„å®ç°" class="headerlink" title="åŸºäºè¿è¡ŒæœŸOCçš„Getæ–¹æ³•å’ŒSetæ–¹æ³•çš„å®ç°"></a>åŸºäºè¿è¡ŒæœŸOCçš„Getæ–¹æ³•å’ŒSetæ–¹æ³•çš„å®ç°</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line">//åŠ¨æ€æ–¹æ³•è§£æå‡½æ•°</div><div class="line">+(BOOL)resolveInstanceMethod:(SEL)sel&#123;</div><div class="line">    NSString *selectorString=NSStringFromSelector(sel);</div><div class="line">    if ([selectorString hasPrefix:@&quot;set&quot;]) &#123;</div><div class="line">        class_addMethod(self, sel, (IMP)autoDictionarySetter, &quot;v@:@&quot;);</div><div class="line">    &#125;else&#123;</div><div class="line">        class_addMethod(self, sel, (IMP)autoDictionaryGetter, &quot;@@:&quot;);</div><div class="line">    &#125;</div><div class="line">    return YES;</div><div class="line">&#125;</div><div class="line"></div><div class="line">id autoDictionaryGetter(id self,SEL _cmd)&#123;</div><div class="line">    EOCAutoDictionary *typeSelf=(EOCAutoDictionary *)self;</div><div class="line">    NSMutableDictionary *backingStore=typeSelf.backingStore;</div><div class="line">    NSString *key=NSStringFromSelector(_cmd);</div><div class="line">    return [backingStore objectForKey:key];</div><div class="line">&#125;</div><div class="line"></div><div class="line">void autoDictionarySetter(id self,SEL _cmd,id value)&#123;</div><div class="line">    EOCAutoDictionary *typeSelf=(EOCAutoDictionary *)self;</div><div class="line">    NSMutableDictionary *backingStore=typeSelf.backingStore;</div><div class="line">    </div><div class="line">    NSString *selectorString=NSStringFromSelector(_cmd);</div><div class="line">    NSMutableString *key=[selectorString mutableCopy];</div><div class="line">    </div><div class="line">    [key deleteCharactersInRange:NSMakeRange(key.length - 1, 1)];</div><div class="line">    </div><div class="line">    [key deleteCharactersInRange:NSMakeRange(0, 3)];</div><div class="line">    </div><div class="line">    NSString *lowercaseFirstChar=[[key substringToIndex:1] lowercaseString];</div><div class="line">    [key replaceCharactersInRange:NSMakeRange(0, 1) withString:lowercaseFirstChar];</div><div class="line">    if (value) &#123;</div><div class="line">        [backingStore setObject:value forKey:key];</div><div class="line">    &#125;else&#123;</div><div class="line">        [backingStore removeObjectForKey:key];</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å½“å¯¹è±¡åœ¨æ”¶åˆ°æ— æ³•è§£è¯»çš„æ¶ˆæ¯å,é¦–å…ˆè°ƒç”¨å…¶æ‰€å±ç±»çš„ä¸‹åˆ—ç±»æ–¹æ³•</p>
<p> +(BOOL)resolveInstanceMethod:(SEL)sel</p>
<p> æ‰€ä»¥å¯ä»¥åˆ©ç”¨å…¶æ¶ˆæ¯è½¬å‘æœºåˆ¶çš„è¿™ä¸ªå‡½æ•°æ¥é‡æ–°get,setæ–¹æ³•,<a href="https://github.com/MyExam-hu/SummaryPro/blob/master/SummaryPro/Class/EOCAutoDictionary.m" target="_blank" rel="external">å®Œæ•´ä»£ç é“¾æ¥</a>.</p>
<h3 id="valueForKeyPathä½¿ç”¨æ€»ç»“"><a href="#valueForKeyPathä½¿ç”¨æ€»ç»“" class="headerlink" title="valueForKeyPathä½¿ç”¨æ€»ç»“"></a>valueForKeyPathä½¿ç”¨æ€»ç»“</h3><p>å–æ•°ç»„é‡Œé¢æ•°å­—çš„æœ€å¤§å€¼</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">NSArray * array = [NSArray arrayWithObjects:@0,@50,@9, nil];</div><div class="line">NSInteger max = [[array valueForKeyPath:@&quot;@max.floatValue&quot;] integerValue];</div><div class="line">NSLog(@&quot;%ld&quot;,(long)max);</div></pre></td></tr></table></figure>
<p>å»æ•°ç»„é‡Œé¢æ•°å­—çš„å¹³å‡å€¼</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">NSArray *arr = @[@0,@10,@40];</div><div class="line">CGFloat avg = [[arr valueForKeyPath:@&quot;@avg.floatValue&quot;] floatValue];</div><div class="line">NSLog(@&quot;---%f&quot;,avg);</div></pre></td></tr></table></figure>
<p>å‰”é™¤é‡å¤æ•°æ®</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">NSArray *array1 = @[@&quot;name&quot;, @&quot;w&quot;, @&quot;aa&quot;, @&quot;jimsa&quot;, @&quot;aa&quot;];</div><div class="line">NSLog(@&quot;%@&quot;, [array1 valueForKeyPath:@&quot;@distinctUnionOfObjects.self&quot;]);</div></pre></td></tr></table></figure>
<p>åŒæ ·å¯ä»¥åµŒå¥—ä½¿ç”¨ï¼Œå…ˆå‰”é™¤nameå¯¹åº”å€¼çš„é‡å¤æ•°æ®å†å–å€¼</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">NSArray *array2 = @[@&#123;@&quot;name&quot; : @&quot;cookeee&quot;,@&quot;code&quot; : @1&#125;,</div><div class="line">                       @&#123;@&quot;name&quot;: @&quot;jim&quot;,@&quot;code&quot; : @2&#125;,</div><div class="line">                       @&#123;@&quot;name&quot;: @&quot;jim&quot;,@&quot;code&quot; : @1&#125;,</div><div class="line">                       @&#123;@&quot;name&quot;: @&quot;jbos&quot;,@&quot;code&quot; : @1&#125;];</div><div class="line">    </div><div class="line">NSLog(@&quot;%@&quot;, [array2 valueForKeyPath:@&quot;@distinctUnionOfObjects.name&quot;]);</div></pre></td></tr></table></figure>
<p>æ‰§è¡Œæ•°ç»„é‡Œé¢çš„ç‰¹å®šå±æ€§å¤„ç†å®Œæˆåè¿”å›ä¸€ä¸ªæ•°ç»„</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">NSArray *arrayList = @[@&quot;name&quot;, @&quot;w&quot;, @&quot;aa&quot;, @&quot;jimsa&quot;];</div><div class="line">NSLog(@&quot;%@&quot;, [arrayList valueForKeyPath:@&quot;uppercaseString&quot;]);</div></pre></td></tr></table></figure>
<p>æ±‚å’Œã€æ±‚å¹³å‡å€¼ã€æœ€å¤§å€¼ã€æœ€å°å€¼</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">NSNumber *sum = [array valueForKeyPath:@&quot;@sum.floatValue&quot;];</div><div class="line">NSNumber *avg = [array valueForKeyPath:@&quot;@avg.floatValue&quot;];</div><div class="line">NSNumber *max = [array valueForKeyPath:@&quot;@max.floatValue&quot;];</div><div class="line">NSNumber *min = [array valueForKeyPath:@&quot;@min.floatValue&quot;];</div></pre></td></tr></table></figure>
<h3 id="KVO"><a href="#KVO" class="headerlink" title="KVO"></a>KVO</h3><p>æ·»åŠ kvoé€šçŸ¥</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[self.dogName addObserver:self forKeyPath:@&quot;masterName&quot; options:NSKeyValueObservingOptionNew context:nil];</div></pre></td></tr></table></figure>
<p>åœ¨å®ä½“ç±»ä¸­è®¾ç½®é€šçŸ¥</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">+(BOOL)automaticallyNotifiesObserversForKey:(NSString *)key&#123;</div><div class="line">    //è‡ªåŠ¨é€šçŸ¥</div><div class="line">    if ([key isEqualToString:@&quot;dogNameStr&quot;]) &#123;</div><div class="line">        return YES;</div><div class="line">    &#125;</div><div class="line">    //æ‰‹åŠ¨é€šçŸ¥</div><div class="line">    if ([key isEqualToString:@&quot;masterName&quot;]) &#123;</div><div class="line">        return NO;</div><div class="line">    &#125;</div><div class="line">    return [super automaticallyNotifiesObserversForKey:key];</div><div class="line">&#125;</div><div class="line"></div><div class="line">-(void)setMasterName:(NSString *)pmasterName&#123;</div><div class="line">    //è®¾ç½®æ‰‹åŠ¨é€šçŸ¥</div><div class="line">    [self willChangeValueForKey:@&quot;masterName&quot;];</div><div class="line">    @synchronized(self) &#123;</div><div class="line">        _masterName=pmasterName;</div><div class="line">    &#125;</div><div class="line">    [self didChangeValueForKey:@&quot;masterName&quot;];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç„¶ååœ¨éœ€è¦é€šçŸ¥çš„ç•Œé¢æ¥æ”¶é€šçŸ¥</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">-(void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary&lt;NSKeyValueChangeKey,id&gt; *)change context:(void *)context&#123;</div><div class="line">    if ([object isKindOfClass:[clsDogName class]]) &#123;</div><div class="line">        if ([keyPath isEqualToString:@&quot;dogNameStr&quot;]) &#123;</div><div class="line">            self.lbDogName.text=[change objectForKey:NSKeyValueChangeNewKey];</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¸»è¦ç”¨äºæ¯”å¦‚åœ¨ä¸€ä¸ªç•Œé¢ä¿®æ”¹äº†ç”¨æˆ·çš„èµ„æ–™,æŒ‰ä¿å­˜åŒæ—¶èƒ½å®æ—¶çš„åŒæ­¥ä¿®æ”¹ç”¨æˆ·çš„èµ„æ–™è¿™æ ·ç±»ä¼¼çš„åœºæ™¯.</p>
<h3 id="NSPredicateè°“è¯ç­›é€‰å™¨"><a href="#NSPredicateè°“è¯ç­›é€‰å™¨" class="headerlink" title="NSPredicateè°“è¯ç­›é€‰å™¨"></a>NSPredicateè°“è¯ç­›é€‰å™¨</h3><p>æŠŠæ—¶é—´å°äº2016-10-04çš„æ—¶å€™å‰”é™¤,é‡å¤æ—¶é—´ä¹Ÿå‰”é™¤,ç„¶åæ’åº,<a href="http://www.jianshu.com/p/88be28860cde" target="_blank" rel="external">å…¶ä»–ç”¨æ³•åœ¨è¿™é‡Œ</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">-(void)loadPredicateTest&#123;</div><div class="line">    //æŠŠDATETIMEç›¸åŒæ—¶é—´åˆå¹¶æ’åº,ç„¶åå†è¿‡æ»¤æ‰2016-10-04å·å‰çš„æ—¥æœŸ</div><div class="line">    NSArray *list=@[@&#123;@&quot;DATETIME&quot;:@&quot;2016-10-01&quot;&#125;,</div><div class="line">                    @&#123;@&quot;DATETIME&quot;:@&quot;2016-10-06&quot;&#125;,</div><div class="line">                    @&#123;@&quot;DATETIME&quot;:@&quot;2016-10-05&quot;&#125;,</div><div class="line">                    @&#123;@&quot;DATETIME&quot;:@&quot;2016-10-04&quot;&#125;,</div><div class="line">                    @&#123;@&quot;DATETIME&quot;:@&quot;2016-10-05&quot;&#125;,</div><div class="line">                    @&#123;@&quot;DATETIME&quot;:@&quot;2016-10-03&quot;&#125;,</div><div class="line">                    @&#123;@&quot;DATETIME&quot;:@&quot;2016-10-02&quot;&#125;,</div><div class="line">                    @&#123;@&quot;DATETIME&quot;:@&quot;2016-10-02&quot;&#125;];</div><div class="line">    </div><div class="line">    //æŠŠæ—¥æœŸè¿‡æ»¤</div><div class="line">    NSPredicate *predicate = [NSPredicate predicateWithFormat:@&quot;DATETIME &gt;= &apos;2016-10-04&apos;&quot;];//åˆ›å»ºè°“è¯ç­›é€‰å™¨</div><div class="line">    NSArray *filtrationList = [list filteredArrayUsingPredicate:predicate];</div><div class="line">    //å‰”é™¤é‡å¤æ•°æ®</div><div class="line">    filtrationList=[filtrationList valueForKeyPath:@&quot;@distinctUnionOfObjects.DATETIME&quot;];</div><div class="line">    //æ’åº</div><div class="line">    NSArray *sortSetArray = [filtrationList sortedArrayUsingDescriptors:@[[NSSortDescriptor sortDescriptorWithKey:nil ascending:NO]]];</div><div class="line">    NSLog(@&quot;%@&quot;,sortSetArray);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/11/08/AFNetworkingæµç¨‹æ€»ç»“/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="echo.hu">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/uploads/headImage.png">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="echo.hu">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="echo.hu" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/11/08/AFNetworkingæµç¨‹æ€»ç»“/" itemprop="url">
                  AFNetworkingæµç¨‹æ€»ç»“
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-11-08T15:22:22+08:00">
                2016-11-08
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2016/11/08/AFNetworkingæµç¨‹æ€»ç»“/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/11/08/AFNetworkingæµç¨‹æ€»ç»“/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2016/11/08/AFNetworkingæµç¨‹æ€»ç»“/" class="leancloud_visitors" data-flag-title="AFNetworkingæµç¨‹æ€»ç»“">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•° </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="AFNetworkingæµç¨‹æ€»ç»“"><a href="#AFNetworkingæµç¨‹æ€»ç»“" class="headerlink" title="AFNetworkingæµç¨‹æ€»ç»“"></a>AFNetworkingæµç¨‹æ€»ç»“</h1><h3 id="ä¸€-è°ƒç”¨POSTæˆ–GETæ–¹æ³•-å¹¶æŠŠæˆåŠŸã€å¤±è´¥æ–¹æ³•å—ä¼ å…¥"><a href="#ä¸€-è°ƒç”¨POSTæˆ–GETæ–¹æ³•-å¹¶æŠŠæˆåŠŸã€å¤±è´¥æ–¹æ³•å—ä¼ å…¥" class="headerlink" title="ä¸€.è°ƒç”¨POSTæˆ–GETæ–¹æ³•,å¹¶æŠŠæˆåŠŸã€å¤±è´¥æ–¹æ³•å—ä¼ å…¥."></a>ä¸€.è°ƒç”¨POSTæˆ–GETæ–¹æ³•,å¹¶æŠŠæˆåŠŸã€å¤±è´¥æ–¹æ³•å—ä¼ å…¥.</h3><h3 id="äºŒ-è°ƒç”¨dataTaskWithHTTPMethodæ–¹æ³•è¿”å›NSURLSessionDataTaskå¯¹è±¡dataTask-ä¸‹é¢æ˜¯ç”ŸæˆNSURLSessionDataTaskå¯¹è±¡çš„æ—¶å€™é‡Œé¢åšçš„äº‹æƒ…"><a href="#äºŒ-è°ƒç”¨dataTaskWithHTTPMethodæ–¹æ³•è¿”å›NSURLSessionDataTaskå¯¹è±¡dataTask-ä¸‹é¢æ˜¯ç”ŸæˆNSURLSessionDataTaskå¯¹è±¡çš„æ—¶å€™é‡Œé¢åšçš„äº‹æƒ…" class="headerlink" title="äºŒ.è°ƒç”¨dataTaskWithHTTPMethodæ–¹æ³•è¿”å›NSURLSessionDataTaskå¯¹è±¡dataTask(ä¸‹é¢æ˜¯ç”ŸæˆNSURLSessionDataTaskå¯¹è±¡çš„æ—¶å€™é‡Œé¢åšçš„äº‹æƒ…)"></a>äºŒ.è°ƒç”¨dataTaskWithHTTPMethodæ–¹æ³•è¿”å›NSURLSessionDataTaskå¯¹è±¡dataTask(ä¸‹é¢æ˜¯ç”ŸæˆNSURLSessionDataTaskå¯¹è±¡çš„æ—¶å€™é‡Œé¢åšçš„äº‹æƒ…)</h3><h4 id="1-æ ¹æ®POSTæˆ–GETæ–¹æ³•ã€URLã€å‚æ•°ç”ŸæˆNSMutableURLRequestå¯¹è±¡request"><a href="#1-æ ¹æ®POSTæˆ–GETæ–¹æ³•ã€URLã€å‚æ•°ç”ŸæˆNSMutableURLRequestå¯¹è±¡request" class="headerlink" title="(1).æ ¹æ®POSTæˆ–GETæ–¹æ³•ã€URLã€å‚æ•°ç”ŸæˆNSMutableURLRequestå¯¹è±¡request"></a>(1).æ ¹æ®POSTæˆ–GETæ–¹æ³•ã€URLã€å‚æ•°ç”ŸæˆNSMutableURLRequestå¯¹è±¡request</h4><ul>
<li><p>åˆ¤æ–­å‚æ•°æœ‰æ•ˆä¸å¦</p>
</li>
<li><p>æ ¹æ®URLå’ŒHTTPMethodæ–¹æ³•ç±»å‹åˆå§‹åŒ–NSMutableURLRequestå¯¹è±¡</p>
</li>
<li><p>self.mutableObservedChangedKeyPathsé‡Œé¢çš„å€¼ä¼šåœ¨åˆå§‹åŒ–requestSerializerä¸­ç›¸å…³çš„å±æ€§çš„æ—¶å€™é€šè¿‡kvoèµ‹å€¼æˆ–ç§»é™¤</p>
</li>
<li><p>æ ¹æ®åˆå§‹åŒ–é€‰æ‹©çš„å¯åºåˆ—åŒ–çš„ç±»å‹(jsonã€htmlã€xml)è°ƒç”¨ä¸åŒç±»çš„æ–¹æ³•èµ‹å€¼ç»™mutableRequest</p>
</li>
</ul>
<h4 id="2-æ ¹æ®-1-ä¸­ç”Ÿæˆçš„requestå¯¹è±¡å¹¶ä¼ å…¥ä¸Šä¼ è¿›åº¦ã€ä¸‹è½½è¿›åº¦æ–¹æ³•å—ç”ŸæˆNSURLSessionDataTaskå¯¹è±¡å¹¶ä¼ å…¥å›è°ƒæ–¹æ³•å—-å›è°ƒæ–¹æ³•å—é‡Œé¢æ ¹æ®è¿”å›çš„å‚æ•°é€‰æ‹©è°ƒç”¨æˆåŠŸæˆ–å¤±è´¥æ–¹æ³•å—"><a href="#2-æ ¹æ®-1-ä¸­ç”Ÿæˆçš„requestå¯¹è±¡å¹¶ä¼ å…¥ä¸Šä¼ è¿›åº¦ã€ä¸‹è½½è¿›åº¦æ–¹æ³•å—ç”ŸæˆNSURLSessionDataTaskå¯¹è±¡å¹¶ä¼ å…¥å›è°ƒæ–¹æ³•å—-å›è°ƒæ–¹æ³•å—é‡Œé¢æ ¹æ®è¿”å›çš„å‚æ•°é€‰æ‹©è°ƒç”¨æˆåŠŸæˆ–å¤±è´¥æ–¹æ³•å—" class="headerlink" title="(2).æ ¹æ®(1)ä¸­ç”Ÿæˆçš„requestå¯¹è±¡å¹¶ä¼ å…¥ä¸Šä¼ è¿›åº¦ã€ä¸‹è½½è¿›åº¦æ–¹æ³•å—ç”ŸæˆNSURLSessionDataTaskå¯¹è±¡å¹¶ä¼ å…¥å›è°ƒæ–¹æ³•å—(å›è°ƒæ–¹æ³•å—é‡Œé¢æ ¹æ®è¿”å›çš„å‚æ•°é€‰æ‹©è°ƒç”¨æˆåŠŸæˆ–å¤±è´¥æ–¹æ³•å—)"></a>(2).æ ¹æ®(1)ä¸­ç”Ÿæˆçš„requestå¯¹è±¡å¹¶ä¼ å…¥ä¸Šä¼ è¿›åº¦ã€ä¸‹è½½è¿›åº¦æ–¹æ³•å—ç”ŸæˆNSURLSessionDataTaskå¯¹è±¡å¹¶ä¼ å…¥å›è°ƒæ–¹æ³•å—(å›è°ƒæ–¹æ³•å—é‡Œé¢æ ¹æ®è¿”å›çš„å‚æ•°é€‰æ‹©è°ƒç”¨æˆåŠŸæˆ–å¤±è´¥æ–¹æ³•å—)</h4><ul>
<li><p>åˆ¤æ–­çº¿ç¨‹å®‰å…¨</p>
</li>
<li><p>æ ¹æ®NSURLSessionDataTaskå¯¹è±¡dataTaskç»‘å®šæ–¹æ³•å—(æˆåŠŸå›è°ƒæ–¹æ³•å—ã€ä¸‹è½½ä¸Šä¼ è¿›åº¦æ–¹æ³•å—)å’Œå§”æ‰˜,å¹¶æ·»åŠ ç›¸å…³é€šçŸ¥å¦‚æš‚åœä»»åŠ¡å’Œç»§ç»­ä»»åŠ¡é€šçŸ¥ã€æ·»åŠ ç›¸å…³ä»»åŠ¡å±æ€§kovçš„æ£€æµ‹å¦‚countOfBytesReceivedï¼ŒcountOfBytesExpectedToReceiveå±æ€§ç­‰</p>
</li>
</ul>
<h3 id="ä¸‰-è°ƒç”¨dataTaskå¯¹è±¡çš„æ–¹æ³•resumeå‘é€ç½‘ç»œè¯·æ±‚"><a href="#ä¸‰-è°ƒç”¨dataTaskå¯¹è±¡çš„æ–¹æ³•resumeå‘é€ç½‘ç»œè¯·æ±‚" class="headerlink" title="ä¸‰.è°ƒç”¨dataTaskå¯¹è±¡çš„æ–¹æ³•resumeå‘é€ç½‘ç»œè¯·æ±‚"></a>ä¸‰.è°ƒç”¨dataTaskå¯¹è±¡çš„æ–¹æ³•resumeå‘é€ç½‘ç»œè¯·æ±‚</h3><h3 id="å››-ç„¶åä»ç½‘ç»œè¯·æ±‚å§”æ‰˜å›è°ƒè¿”å›æ•°æ®è½¬å‘ç»™AFURLSessionManagerTaskDelegateå§”æ‰˜ä¸­çš„å¯¹åº”çš„æ–¹æ³•"><a href="#å››-ç„¶åä»ç½‘ç»œè¯·æ±‚å§”æ‰˜å›è°ƒè¿”å›æ•°æ®è½¬å‘ç»™AFURLSessionManagerTaskDelegateå§”æ‰˜ä¸­çš„å¯¹åº”çš„æ–¹æ³•" class="headerlink" title="å››.ç„¶åä»ç½‘ç»œè¯·æ±‚å§”æ‰˜å›è°ƒè¿”å›æ•°æ®è½¬å‘ç»™AFURLSessionManagerTaskDelegateå§”æ‰˜ä¸­çš„å¯¹åº”çš„æ–¹æ³•"></a>å››.ç„¶åä»ç½‘ç»œè¯·æ±‚å§”æ‰˜å›è°ƒè¿”å›æ•°æ®è½¬å‘ç»™AFURLSessionManagerTaskDelegateå§”æ‰˜ä¸­çš„å¯¹åº”çš„æ–¹æ³•</h3><h3 id="äº”-è§£ææ•°æ®ï¼Œç„¶åä»AFURLSessionManagerTaskDelegateä¸­å–å‡ºcompletionHandleræ–¹æ³•å—å›è°ƒ-è§£ææ•°æ®æ˜¯åœ¨å¦å¤–å¼€ä¸€ä¸ªè¿›ç¨‹é‡Œé¢è§£æçš„"><a href="#äº”-è§£ææ•°æ®ï¼Œç„¶åä»AFURLSessionManagerTaskDelegateä¸­å–å‡ºcompletionHandleræ–¹æ³•å—å›è°ƒ-è§£ææ•°æ®æ˜¯åœ¨å¦å¤–å¼€ä¸€ä¸ªè¿›ç¨‹é‡Œé¢è§£æçš„" class="headerlink" title="äº”.è§£ææ•°æ®ï¼Œç„¶åä»AFURLSessionManagerTaskDelegateä¸­å–å‡ºcompletionHandleræ–¹æ³•å—å›è°ƒ(è§£ææ•°æ®æ˜¯åœ¨å¦å¤–å¼€ä¸€ä¸ªè¿›ç¨‹é‡Œé¢è§£æçš„)"></a>äº”.è§£ææ•°æ®ï¼Œç„¶åä»AFURLSessionManagerTaskDelegateä¸­å–å‡ºcompletionHandleræ–¹æ³•å—å›è°ƒ(è§£ææ•°æ®æ˜¯åœ¨å¦å¤–å¼€ä¸€ä¸ªè¿›ç¨‹é‡Œé¢è§£æçš„)</h3>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/10/19/æŸ¥é˜…ç¬”è®°/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="echo.hu">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/uploads/headImage.png">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="echo.hu">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="echo.hu" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/10/19/æŸ¥é˜…ç¬”è®°/" itemprop="url">
                  æŸ¥é˜…ç¬”è®°
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-10-19T13:56:22+08:00">
                2016-10-19
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2016/10/19/æŸ¥é˜…ç¬”è®°/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/10/19/æŸ¥é˜…ç¬”è®°/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2016/10/19/æŸ¥é˜…ç¬”è®°/" class="leancloud_visitors" data-flag-title="æŸ¥é˜…ç¬”è®°">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•° </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>ä¸»è¦ä¸ºäº†æ–¹ä¾¿æŸ¥é˜…å®¹æ˜“å¿˜æ‰çš„çŸ¥è¯†ç‚¹</p>
<h3 id="NSURLRequestCachePolicy-ç¼“å­˜ç­–ç•¥"><a href="#NSURLRequestCachePolicy-ç¼“å­˜ç­–ç•¥" class="headerlink" title="NSURLRequestCachePolicy ç¼“å­˜ç­–ç•¥"></a>NSURLRequestCachePolicy ç¼“å­˜ç­–ç•¥</h3><ul>
<li>NSURLRequestUseProtocolCachePolicy = 0, é»˜è®¤çš„ç¼“å­˜ç­–ç•¥ï¼Œå¦‚æœç¼“å­˜ä¸å­˜åœ¨ï¼Œç›´æ¥ä»æœåŠ¡ç«¯è·å–ã€‚å¦‚æœç¼“å­˜å­˜åœ¨ï¼Œä¼šæ ¹æ®responseä¸­çš„Cache-Controlå­—æ®µåˆ¤æ–­ä¸‹ä¸€æ­¥æ“ä½œï¼Œå¦‚: Cache-Controlå­—æ®µä¸ºmust-revalidata, åˆ™è¯¢é—®æœåŠ¡ç«¯è¯¥æ•°æ®æ˜¯å¦æœ‰æ›´æ–°ï¼Œæ— æ›´æ–°çš„è¯ç›´æ¥è¿”å›ç»™ç”¨æˆ·ç¼“å­˜æ•°æ®ï¼Œè‹¥å·²æ›´æ–°ï¼Œåˆ™è¯·æ±‚æœåŠ¡ç«¯.</li>
</ul>
<ul>
<li><p>NSURLRequestReloadIgnoringLocalCacheData = 1, å¿½ç•¥æœ¬åœ°ç¼“å­˜æ•°æ®ï¼Œç›´æ¥è¯·æ±‚æœåŠ¡ç«¯.</p>
</li>
<li><p>NSURLRequestIgnoringLocalAndRemoteCacheData = 4, å¿½ç•¥æœ¬åœ°ç¼“å­˜ï¼Œå¹¶ä¸”ç§»é™¤æœ¬åœ°ç¼“å­˜ï¼Œä»£ç†æœåŠ¡å™¨ä»¥åŠå…¶ä»–ä¸­ä»‹ï¼Œç›´æ¥è¯·æ±‚æºæœåŠ¡ç«¯.</p>
</li>
<li><p>NSURLRequestReloadIgnoringCacheData = NSURLRequestReloadIgnoringLocalCacheData</p>
</li>
<li><p>NSURLRequestReturnCacheDataElseLoad = 2, æœ‰ç¼“å­˜å°±ä½¿ç”¨ï¼Œä¸ç®¡å…¶æœ‰æ•ˆæ€§(å³å¿½ç•¥Cache-Controlå­—æ®µ), æ— åˆ™è¯·æ±‚æœåŠ¡ç«¯.</p>
</li>
<li><p>NSURLRequestReturnCacheDataDontLoad = 3, æ­»æ´»åŠ è½½æœ¬åœ°ç¼“å­˜. æ²¡æœ‰å°±å¤±è´¥. (ç¡®å®šå½“å‰æ— ç½‘ç»œæ—¶ä½¿ç”¨)</p>
</li>
<li><p>NSURLRequestReloadRevalidatingCacheData = 5, ç¼“å­˜æ•°æ®å¿…é¡»å¾—å¾—åˆ°æœåŠ¡ç«¯ç¡®è®¤æœ‰æ•ˆæ‰ä½¿ç”¨(è²Œä¼¼æ˜¯NSURLRequestUseProtocolCachePolicyä¸­çš„ä¸€ç§æƒ…å†µ)</p>
</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  

          
          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/uploads/headImage.png"
               alt="echo.hu" />
          <p class="site-author-name" itemprop="name">echo.hu</p>
          <p class="site-description motion-element" itemprop="description"></p>
        </div>
        <nav class="site-state motion-element">
        
          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">9</span>
                <span class="site-state-item-name">æ—¥å¿—</span>
              </a>
            </div>
          

          

          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">echo.hu</span>
</div>


<div class="powered-by">
  ç”± <a class="theme-link" href="https://hexo.io">Hexo</a> å¼ºåŠ›é©±åŠ¨
</div>

<div class="theme-info">
  ä¸»é¢˜ -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  




  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.0"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"huweidong"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
    
    <script src="/lib/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/js/src/hook-duoshuo.js"></script>
  













  
  

  

  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
  <script>AV.initialize("8HSQgY7qSgEA1EeIVYbzECBN-gzGzoHsz", "xnjkJ7mrpXCixocEkdWDwcTP");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  


</body>
</html>
